{
  "_comment": "This file is generated. Please edit .homeycompose/app.json instead.",
  "id": "com.sonnen.battery",
  "version": "1.8.2",
  "compatibility": ">=12.4.5",
  "sdk": 3,
  "platforms": [
    "local"
  ],
  "name": {
    "en": "Sonnen Batterie"
  },
  "description": {
    "en": "Clean and affordable energy for everyone."
  },
  "category": [
    "energy"
  ],
  "permissions": [],
  "images": {
    "small": "/assets/images/small.png",
    "large": "/assets/images/large.png",
    "xlarge": "/assets/images/xlarge.png"
  },
  "author": {
    "name": "Kim Kokholm",
    "email": "kokholm@gmail.com"
  },
  "brandColor": "#060d1b",
  "source": "https://github.com/HarpunDK/Homey.Sonnen",
  "support": "https://github.com/HarpunDK/Homey.Sonnen",
  "bugs": {
    "url": "https://github.com/HarpunDK/Homey.Sonnen"
  },
  "contributing": {
    "donate": {
      "paypal": {
        "username": "KimKokholm"
      }
    }
  },
  "homepage": "https://github.com/HarpunDK/Homey.Sonnen",
  "homeyCommunityTopicId": 96052,
  "contributors": {
    "developers": [
      {
        "name": "mech78"
      },
      {
        "name": "Tim Bogaert"
      }
    ],
    "translators": [
      {
        "name": "mech78"
      }
    ]
  },
  "flow": {
    "triggers": [
      {
        "id": "operating_mode_capability_changed",
        "title": {
          "en": "The operating mode changed",
          "de": "Der Betriebsmodus wurde geändert"
        },
        "tokens": [
          {
            "name": "operating_mode_capability",
            "type": "string",
            "title": {
              "en": "Operating Mode",
              "de": "Betriebsmodus"
            },
            "example": {
              "en": "Self consumption",
              "de": "Eigenverbrauch"
            }
          }
        ],
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          }
        ]
      },
      {
        "id": "prognosis_charging_capability_true",
        "title": {
          "en": "The prognosis charging is active",
          "de": "Prognosebasiertes Laden ist aktiv"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          }
        ]
      },
      {
        "id": "prognosis_charging_capability_false",
        "title": {
          "en": "The prognosis charging is inactive",
          "de": "Prognosebasiertes Laden ist inaktiv"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          }
        ]
      },
      {
        "id": "online_capability_true",
        "title": {
          "en": "Connection alarm turned on",
          "de": "Verbindungsalarm aktiviert"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          }
        ]
      },
      {
        "id": "online_capability_false",
        "title": {
          "en": "Connection alarm turned off",
          "de": "Verbindungsalarm deaktiviert"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "battery_level_above_or_equal",
        "title": {
          "en": "Battery level above",
          "da": "Batteriniveau over",
          "de": "Batteriestand über",
          "nl": "Batterijniveau boven"
        },
        "titleFormatted": {
          "en": "Battery level !{{is|isn't}} above [[percentage]]%",
          "da": "Batteriniveau !{{er|er ikke}} over [[percentage]]%",
          "de": "Batteriestand !{{liegt|liegt nicht}} über [[percentage]]%",
          "nl": "Batterijniveau !{{is|is niet}} hoger [[percentage]]%"
        },
        "hint": {
          "en": "Battery level above or equal percentage provided.",
          "da": "Batteriniveau er over eller lig med procent angivet.",
          "de": "Batteriestand über oder gleich dem angegebenen Prozentsatz.",
          "nl": "Batterijniveau boven of gelijk percentage verstrekt."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "number",
            "name": "percentage",
            "placeholder": {
              "en": "Battery percentage level",
              "da": "Batteriniveau",
              "de": "Prozentualer Batteriestand",
              "nl": "Batterijpercentageniveau"
            },
            "min": 0,
            "max": 100,
            "step": 1
          }
        ]
      },
      {
        "id": "battery_level_below",
        "title": {
          "en": "Battery level below",
          "da": "Batteriniveau under",
          "de": "Batteriestand unter",
          "nl": "Batterijniveau hieronder"
        },
        "titleFormatted": {
          "en": "Battery level !{{is|isn't}} below [[percentage]]%",
          "da": "Batteriniveau !{{er|er ikke}} under [[percentage]]%",
          "de": "Batteriestand !{{ist|ist nicht}} unter [[percentage]]%",
          "nl": "Het batterijniveau !{{is|is niet}} lager [[percentage]]%"
        },
        "hint": {
          "en": "Battery level below percentage provided.",
          "da": "Batteriniveau er under procent angivet.",
          "de": "Batteriestand unter dem angegebenen Prozentsatz.",
          "nl": "Batterijniveau lager dan aangegeven percentage"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "number",
            "name": "percentage",
            "placeholder": {
              "en": "Battery percentage level",
              "da": "Batteriniveau",
              "de": "Prozentualer Batteriestand",
              "nl": "Batterijpercentageniveau"
            },
            "min": 0,
            "max": 100,
            "step": 1
          }
        ]
      },
      {
        "id": "operating_mode_equals",
        "title": {
          "en": "Operating mode !{{is|isn't}}",
          "de": "Betriebsmodus !{{ist|ist nicht}}"
        },
        "titleFormatted": {
          "en": "Operating mode !{{is|isn't}} [[operating_mode]]",
          "de": "Betriebsmodus !{{ist|ist nicht}} [[operating_mode]]"
        },
        "hint": {
          "en": "Current operating mode",
          "de": "Aktueller Betriebsmodus"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "dropdown",
            "name": "operating_mode",
            "values": [
              {
                "id": "1",
                "label": {
                  "en": "Manual",
                  "de": "Manuell"
                }
              },
              {
                "id": "2",
                "label": {
                  "en": "Self consumption",
                  "de": "Eigenverbrauch"
                }
              },
              {
                "id": "6",
                "label": {
                  "en": "Module extension (30%)",
                  "de": "Modulerweiterung (30%)"
                }
              },
              {
                "id": "10",
                "label": {
                  "en": "Time-of-Use",
                  "de": "Time-of-Use"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "prognosis_charging_equals",
        "title": {
          "en": "Prognosis charging is !{{active|inactive}}",
          "de": "Prognosebasiertes Laden ist !{{aktiv|inaktiv}}"
        },
        "titleFormatted": {
          "en": "Prognosis charging !{{is|isn't}} active: [[active]]",
          "de": "Prognosebasiertes Laden !{{ist|ist nicht}} aktiv: [[active]]"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "checkbox",
            "name": "active"
          }
        ]
      },
      {
        "id": "grid_consumption_current",
        "title": {
          "en": "Consumption from grid",
          "da": "Forbrug fra net",
          "de": "Netzbezug",
          "nl": "Verbruik uit net"
        },
        "titleFormatted": {
          "en": "Consuming watts from grid !{{is|isn't}} greater than [[power]] W",
          "da": "Watt forbrug fra net !{{er|er ikke}} over [[power]] W",
          "de": "Bezug aus dem Stromnetz !{{ist|ist nicht}} größer als [[power]] W",
          "nl": "Het verbruik van watt uit het elektriciteitsnet !{{is|is niet}} groter dan [[power]] W"
        },
        "hint": {
          "en": "Is consuming power from grid.",
          "da": "Henter forbrug fra net",
          "de": "Bezug aus dem Stromnetz",
          "nl": "Verbruikt stroom van het elektriciteitsnet"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie_gridmeter"
          },
          {
            "type": "number",
            "name": "power",
            "placeholder": {
              "en": "Power (W)",
              "da": "Watt (W)",
              "de": "Leistung (W)",
              "nl": "Power (W)"
            },
            "min": 1,
            "step": 1
          }
        ]
      },
      {
        "id": "grid_feed_in_current",
        "title": {
          "en": "Feed-in to grid",
          "da": "Leverer til net",
          "de": "Netzeinspeisung",
          "nl": "Leveren aan het net"
        },
        "titleFormatted": {
          "en": "Feed-in to grid !{{is|isn't}} greater than [[power]] W",
          "da": "Leverer til net !{{er|er ikke}} mere end [[power]] W",
          "de": "Einspeisung in das Stromnetz !{{ist|ist nicht}} größer als [[power]] W",
          "nl": "Leveren aan net !{{is|is niet}} groter dan [[power]] W"
        },
        "hint": {
          "en": "Feeding-in power to grid",
          "da": "Leverer strøm til nettet",
          "de": "Einspeisung in das Stromnetz",
          "nl": "Stroom leveren aan het net"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie_gridmeter"
          },
          {
            "type": "number",
            "name": "power",
            "placeholder": {
              "en": "Power (W)",
              "da": "Watt (W)",
              "de": "Leistung (W)",
              "nl": "Power (W)"
            },
            "min": 1,
            "step": 1
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "set_time_of_use",
        "title": {
          "en": "Set Time-Of-Use",
          "de": "Zeitabhängige Steuerung einstellen"
        },
        "titleFormatted": {
          "en": "Set Time-Of-Use starting [[start]] and ending [[end]] with charge of maximum [[max_power]]W within this period.",
          "de": "Einstellen der zeitabhängigen Steuerung beginnend um [[start]] und endend um [[end]] mit maximaler Leistung [[max_power]]W in dieser Zeitspanne."
        },
        "hint": {
          "en": "Set period for Time-Of-Use",
          "de": "Einstellen der Dauer der zeitabhängigen Steuerung"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "time",
            "name": "start",
            "placeholder": {
              "en": "Enter starting time for new charge event",
              "de": "Startzeit für neues Ladeereignis eingeben"
            }
          },
          {
            "type": "time",
            "name": "end",
            "placeholder": {
              "en": "Enter end time for the new charge event",
              "de": "Endzeit für neues Ladeereignis eingeben"
            }
          },
          {
            "type": "number",
            "name": "max_power",
            "placeholder": {
              "en": "Max. power from grid (0-46000 W)",
              "de": "Max. Leistung aus dem Netz (0-46000 W)"
            },
            "min": 0,
            "max": 46000,
            "step": 1000
          }
        ]
      },
      {
        "id": "set_time_of_use_hours",
        "title": {
          "en": "Set Time-Of-Use with hours",
          "de": "Zeitabhängige Steuerung mit Stundenangabe einstellen"
        },
        "titleFormatted": {
          "en": "Set Time-Of-Use starting [[start]] and ending after hours of [[hours]] with charge of maximum [[max_power]]W within this period.",
          "de": "Einstellen der zeitabhängigen Steuerung beginnend um [[start]] und nach [[hours]] Stunden endend mit maximaler Leistung [[max_power]]W in dieser Zeitspanne."
        },
        "hint": {
          "en": "Set period for Time-Of-Use",
          "de": "Einstellen der Dauer der zeitabhängigen Steuerung"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "time",
            "name": "start",
            "placeholder": {
              "en": "Enter starting time for new charge event",
              "de": "Startzeit für neues Ladeereignis eingeben"
            }
          },
          {
            "type": "number",
            "name": "hours",
            "placeholder": {
              "en": "Specify hours after 'start' to end of schedule",
              "de": "Stundenanzahl ab dem 'Start' bis zum Ende des Ladevorgangs"
            },
            "min": 0,
            "max": 24,
            "step": 1
          },
          {
            "type": "number",
            "name": "max_power",
            "placeholder": {
              "en": "Max. power from grid (0-46000 W)",
              "de": "Max. Leistung aus dem Netz (0-46000 W)"
            },
            "min": 0,
            "max": 46000,
            "step": 1000
          }
        ]
      },
      {
        "id": "set_time_of_use_hours_string",
        "title": {
          "en": "Set Time-Of-Use with custom string",
          "de": "Zeitabhängige Steuerung mit Stundenangabe einstellen"
        },
        "titleFormatted": {
          "en": "Set Time-Of-Use starting [[start]] and ending after hours of [[hours]] with charge of maximum [[max_power]]W within this period.",
          "de": "Einstellen der zeitabhängigen Steuerung beginnend um [[start]] und nach [[hours]] Stunden endend mit maximaler Leistung [[max_power]]W in dieser Zeitspanne."
        },
        "hint": {
          "en": "Set period for Time-Of-Use",
          "de": "Einstellen der Dauer der zeitabhängigen Steuerung"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "text",
            "name": "start",
            "placeholder": {
              "en": "Enter starting time for new charge event. String must be well-formated 24h format (ex: 13:15)",
              "de": "Startzeit für neues Ladeereignis eingeben. String must be well-formated 24h format (ex: 13:15)"
            }
          },
          {
            "type": "number",
            "name": "hours",
            "placeholder": {
              "en": "Specify hours after 'Start' to end of schedule",
              "de": "Stundenanzahl ab dem 'Start' bis zum Ende des Ladevorgangs"
            },
            "min": 0,
            "max": 24,
            "step": 1
          },
          {
            "type": "number",
            "name": "max_power",
            "placeholder": {
              "en": "Max. power from grid (0-46000 W)",
              "de": "Max. Leistung aus dem Netz (0-46000 W)"
            },
            "min": 0,
            "max": 46000,
            "step": 1000
          }
        ]
      },
      {
        "id": "reset_time_of_use",
        "title": {
          "en": "Reset Time-Of-Use",
          "de": "Zurücksetzen der zeitabhängigen Steuerung"
        },
        "hint": {
          "en": "Resets the schedule for Time-Of-Use",
          "de": "Zurücksetzen des Zeitplans der zeitabhängigen Steuerung"
        },
        "highlight": true,
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          }
        ]
      },
      {
        "id": "pause_time_of_use",
        "title": {
          "en": "Pause Time-Of-Use",
          "de": "Pausieren der zeitabhängigen Steuerung"
        },
        "highlight": true,
        "titleFormatted": {
          "en": "Pause Time-Of-Use starting [[start]] and ending [[end]]. Battery will be paused within this period.",
          "de": "Pausieren der zeitabhängigen Steuerung beginnend um [[start]] und endend um [[end]]. Die Batterie wird während dieser Zeitspanne pausiert."
        },
        "hint": {
          "en": "Pause battery consumption within a given period of time",
          "de": "Pausieren des Batterieverbrauchs innerhalb einer bestimmten Zeitspanne"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "time",
            "name": "start",
            "placeholder": {
              "en": "Enter starting time for new charge event",
              "de": "Startzeit für neues Ladeereignis eingeben"
            }
          },
          {
            "type": "time",
            "name": "end",
            "placeholder": {
              "en": "Enter end time for the new charge event",
              "de": "Endzeit für neues Ladeereignis eingeben"
            }
          }
        ]
      },
      {
        "id": "start_charge",
        "title": {
          "en": "Start charge",
          "da": "Start opladning",
          "nl": "Beginnen met opladen",
          "de": "Starte Ladevorgang"
        },
        "titleFormatted": {
          "en": "Start charging of batteri with max. power [[power]] W",
          "da": "Start opladning af batteri med max. power [[power]] W",
          "de": "Starte Ladevorgang der Batterie mit max. Leistung [[power]] W",
          "nl": "Begin met het opladen van de batterij met max. stroom [[power]] W"
        },
        "hint": {
          "en": "Start charging of battery (Time-of-Use)",
          "da": "Start opladning af batteri (Time-of-Use)",
          "de": "Starte Ladevorgang der Batterie (Time-of-Use)",
          "nl": "Begin met het opladen van de batterij (Time-of-Use)"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "number",
            "name": "power",
            "placeholder": {
              "en": "Max. power from grid (0-46000 W)",
              "da": "Max. power fra net (0-46000 W)",
              "de": "Max. Leistung aus dem Netz (0-46000 W)",
              "nl": "Max. stroom uit het net (0-46000 W)"
            },
            "min": 0,
            "max": 46000,
            "step": 1
          }
        ]
      },
      {
        "id": "stop_charge",
        "title": {
          "en": "Stop charge",
          "da": "Stop opladning",
          "de": "Stoppe Ladevorgang"
        },
        "titleFormatted": {
          "en": "Stop charging of battery",
          "da": "Stop opladning af batteri",
          "de": "Stoppe Ladevorgang der Batterie",
          "nl": "Stop met het opladen van de batterij"
        },
        "hint": {
          "en": "Stop charging of battery (Time-of-Use)",
          "da": "Stop opladning af batteri (Time-of-Use)",
          "de": "Stoppe Ladevorgang der Batterie (Time-of-Use)",
          "nl": "Stop met het opladen van de batterij (Time-of-Use)"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          }
        ]
      },
      {
        "id": "switch_operating_mode",
        "title": {
          "en": "Switch operating mode",
          "de": "Betriebsmodus umschalten"
        },
        "titleFormatted": {
          "en": "Switch operating mode to [[operating_mode]]",
          "de": "Betriebsmodus auf [[operating_mode]] umschalten"
        },
        "hint": {
          "en": "Switch to the appropriate operating mode to have e.g. the time-of-use schedule applied",
          "de": "Zum passenden Betriebsmodus wechseln, damit z.B. der Time-Of-Use Zeitplan verwendet wird"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "dropdown",
            "name": "operating_mode",
            "values": [
              {
                "id": "1",
                "label": {
                  "en": "Manual",
                  "de": "Manuell"
                }
              },
              {
                "id": "2",
                "label": {
                  "en": "Self consumption",
                  "de": "Eigenverbrauch"
                }
              },
              {
                "id": "6",
                "label": {
                  "en": "Module extension (30%)",
                  "de": "Modulerweiterung (30%)"
                }
              },
              {
                "id": "10",
                "label": {
                  "en": "Time-of-Use",
                  "de": "Time-of-Use"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "set_prognosis_charging",
        "title": {
          "en": "Prognosis charging",
          "de": "Prognosebasiertes Laden"
        },
        "titleFormatted": {
          "en": "Prognosis charging: [[active]]",
          "de": "Prognosebasiertes Laden: [[active]]"
        },
        "hint": {
          "en": "Toggle prognosis charging",
          "de": "Prognosebasiertes Laden umschalten"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=sonnenbatterie"
          },
          {
            "type": "checkbox",
            "name": "active"
          }
        ]
      }
    ]
  },
  "drivers": [
    {
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/sonnenbatterie/assets/images/small.png",
        "large": "/drivers/sonnenbatterie/assets/images/large.png",
        "xlarge": "/drivers/sonnenbatterie/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "name": {
        "en": "sonnenBatterie",
        "de": "sonnenBatterie",
        "nl": "sonnenBatterie"
      },
      "class": "battery",
      "capabilities": [
        "measure_battery",
        "to_battery_capability",
        "from_battery_capability",
        "battery_charging_state",
        "capacity_remaining_capability",
        "capacity_capability",
        "to_battery_daily_capability",
        "from_battery_daily_capability",
        "to_battery_total_capability",
        "from_battery_total_capability",
        "online_capability",
        "number_battery_capability",
        "operating_mode_capability",
        "prognosis_charging_capability",
        "eclipse_capability",
        "state_inverter_capability",
        "state_bms_capability",
        "state_core_control_module_capability",
        "alarm_generic",
        "button.reset_meter",
        "measure_power",
        "meter_power.charged",
        "meter_power.discharged"
      ],
      "capabilitiesOptions": {
        "button.reset_meter": {
          "maintenanceAction": true,
          "title": {
            "en": "Reset totals",
            "de": "Summen zurücksetzen",
            "nl": "Totalen resetten"
          },
          "desc": {
            "en": "Resets totals (kWh). This can not be restored.",
            "de": "Setzt die Gesamtsummen (kWh) zurück. Dies kann nicht rückgängig gemacht werden.",
            "nl": "Reset de totalen (kWh). Dit kan niet worden hersteld."
          }
        },
        "measure_power": {
          "uiComponent": null,
          "preventInsights": true
        },
        "meter_power.charged": {
          "uiComponent": null,
          "preventInsights": true
        },
        "meter_power.discharged": {
          "uiComponent": null,
          "preventInsights": true
        },
        "battery_charging_state": {
          "title": {
            "en": "Charging State",
            "de": "Ladezustand",
            "nl": "Laadstatus"
          },
          "values": [
            {
              "id": "charging",
              "title": {
                "en": "Charging",
                "de": "Laden",
                "nl": "Opladen"
              }
            },
            {
              "id": "discharging",
              "title": {
                "en": "Discharging",
                "de": "Entladen",
                "nl": "Ontladen"
              }
            },
            {
              "id": "idle",
              "title": {
                "en": "Idle",
                "de": "Im Leerlauf",
                "nl": "Inactief"
              }
            }
          ]
        }
      },
      "energy": {
        "homeBattery": true,
        "batteries": [
          "INTERNAL"
        ],
        "meterPowerImportedCapability": "meter_power.charged",
        "meterPowerExportedCapability": "meter_power.discharged"
      },
      "id": "sonnenbatterie",
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Battery Settings",
            "de": "Batterie Einstellungen"
          },
          "children": [
            {
              "id": "operating_mode",
              "type": "dropdown",
              "value": "2",
              "label": {
                "en": "Operating Mode",
                "de": "Betriebsmodus"
              },
              "hint": {
                "en": "Refer to Sonnen Batterie manual for more information.",
                "de": "Siehe Sonnen Batterie Handbuch für weitere Informationen."
              },
              "values": [
                {
                  "id": "1",
                  "label": {
                    "en": "Manual",
                    "de": "Manuell"
                  }
                },
                {
                  "id": "2",
                  "label": {
                    "en": "Self consumption",
                    "de": "Eigenverbrauch"
                  }
                },
                {
                  "id": "6",
                  "label": {
                    "en": "Module extension (30%)",
                    "de": "Modulerweiterung (30%)"
                  }
                },
                {
                  "id": "10",
                  "label": {
                    "en": "Time-of-Use",
                    "de": "Time-of-Use"
                  }
                }
              ]
            },
            {
              "id": "time_of_use_schedule",
              "type": "textarea",
              "label": {
                "en": "Time-of-Use Schedule",
                "de": "Time-of-Use Zeitplan"
              },
              "value": "",
              "hint": {
                "en": "Format of each line (startTime-endTime: maxW): 'HH:MM-HH:MM: nW', e.g.\n00:00-09:00: 2000W\n09:00-12:00: 3000W\n12:00-24:00: 2000W. The operating mode 'Time-of-Use' must be active to use this feature. Refer to Sonnen Batterie manual for more information.",
                "de": "Format jeder Zeile (StartZeit-EndZeit: maxW): 'HH:MM-HH:MM: nW', z.B.\n00:00-09:00: 2000W\n09:00-12:00: 3000W\n12:00-24:00: 2000W. Der Betriebsmodus 'Time-of-Use' muss aktiv sein, um diese Funktion zu nutzen. Siehe Sonnen Batterie Handbuch für weitere Informationen."
              }
            },
            {
              "id": "prognosis_charging",
              "type": "checkbox",
              "label": {
                "en": "Prognosis Charging",
                "de": "Prognosebasiertes Laden"
              },
              "value": false,
              "hint": {
                "en": "Refer to Sonnen Batterie manual for more information.",
                "de": "Siehe Sonnen Batterie Handbuch für weitere Informationen."
              }
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Connection",
            "de": "Verbindung"
          },
          "children": [
            {
              "id": "device_ip",
              "type": "text",
              "label": {
                "en": "IP address",
                "de": "IP Adresse"
              },
              "value": "",
              "hint": {
                "en": "Shows the current IP of the Sonnen Batterie. Optional: Disable auto-discovery and set the static IPv4 address (e.g. 192.168.1.xxx) manually.",
                "de": "Zeigt die aktuelle IP der Sonnen Batterie. Optional: Automatische Ermittlung deaktivieren und die statische IPv4 Adresse (z.B. 192.168.1.xxx) selbst angeben."
              }
            },
            {
              "id": "device_discovery",
              "type": "checkbox",
              "label": {
                "en": "Auto-discover IP address",
                "de": "IP Adresse automatisch ermitteln"
              },
              "value": true,
              "hint": {
                "en": "Use 'https://find-my.sonnen-batterie.com/find' to track changes of the IP address. Requires local-network.",
                "de": "Benutze 'https://find-my.sonnen-batterie.com/find' um Änderungen der IP Adresse zu verfolgen. Erfordert ein lokales Netzwerk."
              }
            }
          ]
        }
      ]
    },
    {
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/sonnenbatterie_gridmeter/assets/images/small.png",
        "large": "/drivers/sonnenbatterie_gridmeter/assets/images/large.png",
        "xlarge": "/drivers/sonnenbatterie_gridmeter/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "name": {
        "en": "sonnenBatterie Grid",
        "de": "sonnenBatterie Netz",
        "nl": "sonnenBatterie Net"
      },
      "class": "sensor",
      "capabilities": [
        "grid_consumption_current_capability",
        "grid_feed_in_current_capability",
        "grid_consumption_daily_capability",
        "grid_feed_in_daily_capability",
        "grid_consumption_total_capability",
        "grid_feed_in_total_capability",
        "measure_power",
        "meter_power.imported",
        "meter_power.exported"
      ],
      "capabilitiesOptions": {
        "measure_power": {
          "uiComponent": null,
          "preventInsights": true
        },
        "meter_power.imported": {
          "uiComponent": null,
          "preventInsights": true
        },
        "meter_power.exported": {
          "uiComponent": null,
          "preventInsights": true
        }
      },
      "energy": {
        "cumulative": true,
        "cumulativeImportedCapability": "meter_power.imported",
        "cumulativeExportedCapability": "meter_power.exported"
      },
      "id": "sonnenbatterie_gridmeter"
    },
    {
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/sonnenbatterie_householdmeter/assets/images/small.png",
        "large": "/drivers/sonnenbatterie_householdmeter/assets/images/large.png",
        "xlarge": "/drivers/sonnenbatterie_householdmeter/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "name": {
        "en": "sonnenBatterie household",
        "de": "sonnenBatterie Haushalt",
        "nl": "sonnenBatterie Huishouden"
      },
      "class": "sensor",
      "capabilities": [
        "consumption_current_capability",
        "consumption_daily_capability",
        "consumption_total_capability",
        "autarky_capability",
        "measure_power"
      ],
      "capabilitiesOptions": {
        "measure_power": {
          "uiComponent": null,
          "preventInsights": true
        }
      },
      "energy": {
        "cumulative": true
      },
      "id": "sonnenbatterie_householdmeter"
    },
    {
      "platforms": [
        "local"
      ],
      "connectivity": [
        "lan"
      ],
      "images": {
        "small": "/drivers/sonnenbatterie_solarpanel/assets/images/small.png",
        "large": "/drivers/sonnenbatterie_solarpanel/assets/images/large.png",
        "xlarge": "/drivers/sonnenbatterie_solarpanel/assets/images/xlarge.png"
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ],
      "name": {
        "en": "sonnenBatterie solar panel",
        "de": "sonnenBatterie Solarmodul",
        "nl": "sonnenBatterie Zonnepaneel"
      },
      "class": "solarpanel",
      "capabilities": [
        "production_current_capability",
        "production_daily_capability",
        "production_total_capability",
        "self_consumption_capability",
        "measure_power",
        "meter_power"
      ],
      "capabilitiesOptions": {
        "measure_power": {
          "uiComponent": null,
          "preventInsights": true
        },
        "meter_power": {
          "uiComponent": null,
          "preventInsights": true
        }
      },
      "id": "sonnenbatterie_solarpanel"
    }
  ],
  "widgets": {
    "sonnen-batterie": {
      "name": {
        "en": "Sonnen Batterie"
      },
      "height": 150,
      "settings": [],
      "api": {
        "getData": {
          "method": "GET",
          "path": "/"
        }
      },
      "id": "sonnen-batterie"
    }
  },
  "capabilities": {
    "autarky_capability": {
      "type": "number",
      "title": {
        "en": "Selfsupply",
        "da": "Selvforsyning",
        "de": "Autarkie",
        "nl": "Autarkie"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "%"
      },
      "min": 0,
      "max": 100,
      "decimals": 1,
      "insights": true,
      "icon": "/assets/images/svg/percentage-percent-svgrepo-com.svg"
    },
    "capacity_capability": {
      "type": "number",
      "title": {
        "en": "Capacity",
        "da": "Kapacitet",
        "de": "Kapazität",
        "nl": "Capaciteit"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "icon": "/assets/images/svg/battery-100-svgrepo-com.svg"
    },
    "capacity_remaining_capability": {
      "type": "number",
      "title": {
        "en": "Charged",
        "da": "Opladet",
        "de": "Gespeichert",
        "nl": "Opgeslagen"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "icon": "/assets/images/svg/battery-75-svgrepo-com.svg"
    },
    "consumption_current_capability": {
      "type": "number",
      "title": {
        "en": "Consumption",
        "da": "Forbrug",
        "de": "Verbrauch",
        "nl": "Uitgaven"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "W"
      },
      "min": 0,
      "insights": true,
      "icon": "/assets/images/svg/electricity-home-svgrepo-com.svg"
    },
    "consumption_daily_capability": {
      "type": "number",
      "title": {
        "en": "∑d consumption",
        "da": "∑d forbrug",
        "de": "∑d Verbrauch",
        "nl": "∑d verbruik"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/electricity-home-svgrepo-com_sum_daily.svg"
    },
    "consumption_total_capability": {
      "type": "number",
      "title": {
        "en": "∑ consumption",
        "da": "∑ forbrug",
        "de": "∑ Verbrauch",
        "nl": "∑ verbruik"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/electricity-home-svgrepo-com_sum.svg"
    },
    "eclipse_capability": {
      "type": "string",
      "title": {
        "en": "Eclipse color",
        "da": "Cirkel farve",
        "nl": "Eclipse kleur",
        "de": "Eclipse-Farbe"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "icon": "/assets/images/svg/light-bulb-svgrepo-com.svg",
      "insights": true
    },
    "from_battery_capability": {
      "type": "number",
      "title": {
        "en": "From battery",
        "da": "Fra batteri",
        "nl": "Van de batterij",
        "de": "Entladeleistung"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "W"
      },
      "min": 0,
      "decimals": 0,
      "insights": true,
      "icon": "/assets/images/svg/battery-negative-svgrepo-com.svg"
    },
    "from_battery_daily_capability": {
      "type": "number",
      "title": {
        "en": "∑d Discharged energy",
        "da": "∑d Udladet energi",
        "nl": "∑d Ontladen energie",
        "de": "∑d Entladene Energie"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/battery-negative-svgrepo-com_sum_daily.svg"
    },
    "from_battery_total_capability": {
      "type": "number",
      "title": {
        "en": "∑ Discharged energy",
        "da": "∑ Udladet energi",
        "nl": "∑ Ontladen energie",
        "de": "∑ Entladene Energie"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/battery-negative-svgrepo-com_sum.svg"
    },
    "grid_consumption_current_capability": {
      "type": "number",
      "title": {
        "en": "Grid consumption",
        "da": "Netforbrug",
        "de": "Netzbezug",
        "nl": "Roosterverbruik"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "W"
      },
      "min": 0,
      "insights": true,
      "icon": "/assets/images/svg/electric-tower-power-line-svgrepo-com_import.svg"
    },
    "grid_consumption_daily_capability": {
      "type": "number",
      "title": {
        "en": "∑d Grid consumption",
        "da": "∑d Netforbrug",
        "de": "∑d Netzbezug",
        "nl": "∑d Roosterverbruik"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/electric-tower-power-line-svgrepo-com_import_sum_daily.svg"
    },
    "grid_consumption_total_capability": {
      "type": "number",
      "title": {
        "en": "∑ Grid consumption",
        "da": "∑ Netforbrug",
        "de": "∑ Netzbezug",
        "nl": "∑ Roosterverbruik"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/electric-tower-power-line-svgrepo-com_import_sum.svg"
    },
    "grid_feed_in_current_capability": {
      "type": "number",
      "title": {
        "en": "Grid feed-in",
        "da": "Til net",
        "de": "Netzeinspeisung",
        "nl": "Roosterinvoer"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "W"
      },
      "min": 0,
      "insights": true,
      "icon": "/assets/images/svg/electric-tower-power-line-svgrepo-com_export.svg"
    },
    "grid_feed_in_daily_capability": {
      "type": "number",
      "title": {
        "en": "∑d Grid feed-in",
        "da": "∑d Nettilslutning",
        "de": "∑d Netzeinspeisung",
        "nl": "∑d Roosterinvoer"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/electric-tower-power-line-svgrepo-com_export_sum_daily.svg"
    },
    "grid_feed_in_total_capability": {
      "type": "number",
      "title": {
        "en": "∑ Grid feed-in",
        "da": "∑ Nettilslutning",
        "de": "∑ Netzeinspeisung",
        "nl": "∑ Roosterinvoer"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/electric-tower-power-line-svgrepo-com_export_sum.svg"
    },
    "number_battery_capability": {
      "type": "number",
      "title": {
        "en": "# Batteries",
        "da": "# Batterier",
        "de": "# Batterien",
        "nl": "# Batterijen"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "min": 0,
      "decimals": 0,
      "insights": true,
      "icon": "/assets/images/svg/battery-count.svg"
    },
    "online_capability": {
      "type": "boolean",
      "title": {
        "en": "Active",
        "da": "Aktiv",
        "nl": "Actief",
        "de": "Aktiv"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "insights": true,
      "icon": "/assets/images/svg/switch-button-svgrepo-com.svg",
      "insightsTitleTrue": {
        "en": "Connection alarm turned on",
        "nl": "Connection alarm ging af",
        "da": "Forbindelsesalarm blev aktiveret",
        "de": "Verbindungsalarm aktiviert"
      },
      "insightsTitleFalse": {
        "en": "Connection alarm turned off",
        "nl": "Connection alarm ging uit",
        "da": "Forbindelsesalarm blev deaktiveret",
        "de": "Verbindungsalarm deaktiviert"
      }
    },
    "operating_mode_capability": {
      "type": "string",
      "title": {
        "en": "Operating Mode",
        "da": "Driftstilstand",
        "de": "Betriebsmodus",
        "nl": "Bedrijfsmodus"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "icon": "/assets/images/svg/three-gears-of-configuration-tools-svgrepo-com.svg"
    },
    "production_current_capability": {
      "type": "number",
      "title": {
        "en": "Solar Power",
        "da": "Solenergi",
        "de": "Solarleistung",
        "nl": "Zonnevermogen"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "W"
      },
      "min": 0,
      "insights": true,
      "icon": "/assets/images/svg/solar-battery-4-svgrepo-com.svg"
    },
    "production_daily_capability": {
      "type": "number",
      "title": {
        "en": "∑d Production",
        "da": "∑d Produktion",
        "de": "∑d Erzeugung",
        "nl": "∑d Productie"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/solar-battery-4-svgrepo-com_sum_daily.svg"
    },
    "production_total_capability": {
      "type": "number",
      "title": {
        "en": "∑ Production",
        "da": "∑ Produktion",
        "de": "∑ Erzeugung",
        "nl": "∑ Productie"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/solar-battery-4-svgrepo-com_sum.svg"
    },
    "prognosis_charging_capability": {
      "type": "boolean",
      "title": {
        "en": "Prognosis Charging",
        "da": "Prognose opladning",
        "de": "Prognose Laden",
        "nl": "Prognose laden"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "icon": "/assets/images/svg/weather-symbol-4-svgrepo-com.svg"
    },
    "self_consumption_capability": {
      "type": "number",
      "title": {
        "en": "Self-consumption",
        "da": "Selvforbrug",
        "de": "Eigenverbrauch",
        "nl": "Eigenverbruik"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "%"
      },
      "min": 0,
      "max": 100,
      "decimals": 1,
      "insights": true,
      "icon": "/assets/images/svg/percentage-percent-svgrepo-com.svg"
    },
    "state_bms_capability": {
      "type": "string",
      "title": {
        "en": "BMS",
        "da": "BMS",
        "de": "BMS",
        "nl": "BMS"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "icon": "/assets/images/svg/pulse-svgrepo-com.svg"
    },
    "state_core_control_module_capability": {
      "type": "string",
      "title": {
        "en": "Core Control Module",
        "da": "Centralt styreenhed",
        "nl": "Centrale regeleenheid",
        "de": "Zentrales Steuergerät"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "icon": "/assets/images/svg/electric-charge-svgrepo-com.svg"
    },
    "state_inverter_capability": {
      "type": "string",
      "title": {
        "en": "Inverter",
        "da": "Inverter",
        "nl": "Omvormer",
        "de": "Wechselrichter"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "icon": "/assets/images/svg/bolt-thunder-svgrepo-com.svg"
    },
    "to_battery_capability": {
      "type": "number",
      "title": {
        "en": "To battery",
        "da": "Til batteri",
        "de": "Ladeleistung",
        "nl": "Naar batterij"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "W"
      },
      "min": 0,
      "decimals": 0,
      "insights": true,
      "icon": "/assets/images/svg/battery-positive-svgrepo-com.svg"
    },
    "to_battery_daily_capability": {
      "type": "number",
      "title": {
        "en": "∑d Charged energy",
        "da": "∑d Opladet energi",
        "de": "∑d Geladene Energie",
        "nl": "∑d Geladen energie"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/battery-positive-svgrepo-com_sum_daily.svg"
    },
    "to_battery_total_capability": {
      "type": "number",
      "title": {
        "en": "∑ Charged Energy",
        "da": "∑ Opladet energi",
        "de": "∑ Geladene Energie",
        "nl": "∑ Geladen energie"
      },
      "uiComponent": "sensor",
      "getable": true,
      "setable": true,
      "units": {
        "en": "kWh"
      },
      "min": 0,
      "decimals": 3,
      "insights": true,
      "icon": "/assets/images/svg/battery-positive-svgrepo-com_sum.svg"
    }
  }
}